<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S∆° ƒë·ªì lu·ªìng 2FA - Thi·∫øt k·∫ø chi ti·∫øt</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        * {
            font-family: 'Inter', sans-serif;
        }
        
        body {
            background: #f8fafc;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .node {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 16px 20px;
            text-align: center;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            margin: 8px;
            min-width: 200px;
        }
        
        .node:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 15px -3px rgba(0, 0, 0, 0.15);
        }
        
        .node-start {
            border-color: #3b82f6;
            background: #eff6ff;
            font-weight: 600;
        }
        
        .node-decision {
            border-color: #8b5cf6;
            background: #f3f4f6;
            border-style: dashed;
            border-width: 3px;
            position: relative;
            font-weight: 600;
        }
        
        .node-process {
            border-color: #6b7280;
            background: white;
        }
        
        .node-success {
            border-color: #10b981;
            background: #ecfdf5;
            font-weight: 600;
        }
        
        .node-error {
            border-color: #ef4444;
            background: #fef2f2;
            font-weight: 600;
        }
        
        .node-sub {
            background: #f9fafb;
            border-color: #d1d5db;
            font-size: 0.9rem;
            padding: 12px 16px;
            min-width: 160px;
        }

        .node-sub-small {
            min-width: initial;
            padding: 6px 10px;
            font-size: 11px;
            margin: 4px;
            border-radius: 8px;
        }
        
        .arrow {
            font-size: 1.5rem;
            color: #6b7280;
            margin: 12px 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .arrow-success { color: #10b981; }
        .arrow-error { color: #ef4444; }
        
        .branch-container {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 20px;
            margin: 20px 0;
        }
        
        .branch {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 16px;
            padding: 24px;
            margin: 16px 0;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            min-width: 300px;
            flex: 1;
        }
        
        .branch-2fa-on {
            border-left: 6px solid #10b981;
            background: linear-gradient(135deg, #ecfdf5 0%, white 50%);
        }
        
        .branch-2fa-off {
            border-left: 6px solid #f59e0b;
            background: linear-gradient(135deg, #fffbeb 0%, white 50%);
        }
        
        .branch-title {
            font-size: 1.2rem;
            font-weight: 700;
            padding: 12px 20px;
            border-radius: 25px;
            margin-bottom: 20px;
            display: inline-block;
            text-align: center;
            width: 100%;
        }
        
        .title-on {
            background: #10b981;
            color: white;
        }
        
        .title-off {
            background: #f59e0b;
            color: white;
        }
        
        .sub-branch {
            background: #f8fafc;
            border: 1px dashed #cbd5e1;
            border-radius: 8px;
            padding: 16px;
            margin: 12px 0;
        }
        
        .sub-branch-title {
            font-weight: 600;
            color: #374151;
            margin-bottom: 12px;
            text-align: center;
            background: #e5e7eb;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
        }
        
        .flow-section {
            background: white;
            border-radius: 16px;
            padding: 32px;
            margin: 24px 0;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
        }
        
        .section-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: #1f2937;
            text-align: center;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 3px solid #3b82f6;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .gate-number {
            display: inline-block;
            background: #3b82f6;
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            line-height: 32px;
            font-weight: 700;
            margin-right: 12px;
            font-size: 1rem;
        }
        
        .swimlane-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
            margin: 20px 0;
        }
        
        .swimlane {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 20px;
            border-top: 4px solid #3b82f6;
        }
        
        .swimlane-title {
            font-weight: 700;
            color: #3b82f6;
            text-align: center;
            margin-bottom: 16px;
            font-size: 1rem;
        }
        
        .tab-container {
            display: flex;
            justify-content: center;
            margin-bottom: 24px;
            background: #f1f5f9;
            border-radius: 12px;
            padding: 4px;
        }
        
        .tab-button {
            padding: 12px 24px;
            border-radius: 8px;
            background: transparent;
            color: #64748b;
            border: none;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            flex: 1;
            text-align: center;
        }
        
        .tab-button.active {
            background: white;
            color: #3b82f6;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-weight: 600;
        }
        
        .note-box {
            background: #eff6ff;
            border: 1px solid #bfdbfe;
            border-left: 4px solid #3b82f6;
            border-radius: 8px;
            padding: 16px;
            margin: 16px 0;
        }
        
        .note-title {
            font-weight: 600;
            color: #1d4ed8;
            margin-bottom: 8px;
        }
        
        .step-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            background: #3b82f6;
            color: white;
            border-radius: 50%;
            font-size: 0.8rem;
            font-weight: 700;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <div class="container px-4 py-8">
        <!-- Header -->
        <div class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-gray-800 mb-4">
                üîê S∆° ƒê·ªì Lu·ªìng T√≠ch H·ª£p B·∫£o M·∫≠t 2FA
            </h1>
            <p class="text-xl text-gray-600 font-medium">
                M√¥ h√¨nh c√°c k·ªãch b·∫£n t·ª´ l√∫c ƒëƒÉng nh·∫≠p
            </p>
        </div>

        <!-- Main Authentication Flow -->
        <div class="flow-section">
            <div class="section-title">üö™ LU·ªíNG ƒêƒÇNG NH·∫¨P CH√çNH</div>
            
            <div class="flex flex-col items-center">
                <!-- Start -->
                <div class="node node-start">
                    üë§ Ng∆∞·ªùi d√πng nh·∫≠p T√™n ƒëƒÉng nh·∫≠p & M·∫≠t kh·∫©u
                </div>
                
                <div class="arrow">‚Üì</div>
                
                <!-- Gate 1 -->
                <div class="node node-decision">
                    <span class="gate-number">1</span>
                    üö¶ C·ªîNG 1: X√°c th·ª±c th√¥ng tin ƒëƒÉng nh·∫≠p?
                </div>
                
                <!-- Gate 1 Branches -->
                <div class="branch-container w-full">
                    <div class="flex flex-col items-center flex-1">
                        <div class="text-sm font-semibold text-red-600 mb-2">‚ùå Nh√°nh 1.1: Th√¥ng tin SAI</div>
                        <div class="arrow arrow-error">‚Üì</div>
                        <div class="node node-error">
                            ‚ö†Ô∏è Hi·ªÉn th·ªã th√¥ng b√°o l·ªói<br/>
                            <small class="text-gray-600">Y√™u c·∫ßu nh·∫≠p l·∫°i th√¥ng tin</small><br/>
                            üîö <strong>K·∫æT TH√öC</strong>
                        </div>
                    </div>
                    
                    <div class="flex flex-col items-center flex-1">
                        <div class="text-sm font-semibold text-green-600 mb-2">‚úÖ Nh√°nh 1.2: Th√¥ng tin ƒê√öNG</div>
                        <div class="arrow arrow-success">‚Üì</div>
                        <!-- Gate 2 - MOVED HERE -->
                        <div class="node node-decision">
                            <span class="gate-number">2</span>
                            üîç C·ªîNG 2: Ki·ªÉm tra tr·∫°ng th√°i 2FA c·ªßa t√†i kho·∫£n?
                        </div>
                    </div>
                </div>
            </div>
        </div>
		<P>
			<div class="section-title">C·ªîNG 2: Ki·ªÉm tra tr·∫°ng th√°i 2FA c·ªßa t√†i kho·∫£n</div>
		</P>
        <!-- 2FA Enabled Branch -->
        <div class="flow-section">
            <div class="branch branch-2fa-on">
                <div class="branch-title title-on">
                    üü¢ LU·ªíNG A: T√ÄI KHO·∫¢N ƒê√É B·∫¨T 2FA
                </div>
                
                <div class="flex flex-col items-center">
                    <div class="node node-process">
                        üì± Hi·ªÉn th·ªã m√†n h√¨nh y√™u c·∫ßu nh·∫≠p m√£ 2FA<br/>
                        <small class="text-gray-600">Hi·ªÉn th·ªã c√°c ph∆∞∆°ng th·ª©c ƒë√£ thi·∫øt l·∫≠p</small>
                    </div>
                    
                    <div class="arrow">‚Üì</div>
                    
                    <div class="node node-decision">
                        <span class="gate-number">A</span>
                        ü§î Ng∆∞·ªùi d√πng ch·ªçn h√†nh ƒë·ªông g√¨?
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 w-full mt-6">
                        <!-- Sub-branch A1 -->
                        <div class="sub-branch">
                            <div class="sub-branch-title">üìù Nh√°nh A.1: Nh·∫≠p m√£ x√°c th·ª±c</div>
                            <div class="flex flex-col items-center space-y-3">
                                <div class="node node-sub">
                                    <span class="step-number">1</span>
                                    Ng∆∞·ªùi d√πng nh·∫≠p m√£ OTP/TOTP
                                </div>
                                <div class="arrow">‚Üì</div>
                                <div class="node node-decision node-sub">
                                    üîç Ki·ªÉm tra m√£ h·ª£p l·ªá?
                                </div>
                                <div class="grid grid-cols-2 gap-3 w-full">
                                    <div class="text-center">
                                        <div class="text-xs text-red-600 font-semibold mb-2">‚ùå KH√îNG h·ª£p l·ªá</div>
                                        <div class="node node-error node-sub">
                                            ‚ö†Ô∏è Hi·ªÉn th·ªã l·ªói<br/>
                                            <small>Y√™u c·∫ßu nh·∫≠p l·∫°i</small>
                                        </div>
                                    </div>
                                    <div class="text-center">
                                        <div class="text-xs text-green-600 font-semibold mb-2">‚úÖ H·ª¢P L·ªÜ</div>
                                        <div class="node node-success node-sub">
                                            üéâ ƒêƒÉng nh·∫≠p<br/>v√†o ·ª®NG D·ª§NG
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Sub-branch A2 -->
                        <div class="sub-branch">
                            <div class="sub-branch-title">üîÑ Nh√°nh A.2: Th·ª≠ c√°ch kh√°c</div>
                            <div class="flex flex-col items-center space-y-3">
                                <div class="node node-sub">
                                    <span class="step-number">1</span>
                                    Hi·ªÉn th·ªã danh s√°ch c√°c ph∆∞∆°ng th·ª©c ƒë√£ thi·∫øt l·∫≠p
                                </div>
                                <div class="arrow">‚Üì</div>
                                <div class="node node-sub">
                                    <span class="step-number">2</span>
                                    Ng∆∞·ªùi d√πng ch·ªçn ph∆∞∆°ng th·ª©c kh√°c<br/>
                                    <small class="text-gray-600">(Email, SMS, App Authenticator)</small>
                                </div>
                                <div class="arrow">‚Üì</div>
                                <div class="node node-process node-sub">
                                    üîÑ Quay l·∫°i <strong>Nh√°nh A.1</strong><br/>
                                    <small class="text-blue-600">Nh·∫≠p m√£ t·ª´ ph∆∞∆°ng th·ª©c m·ªõi</small>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Sub-branch A3 -->
                        <div class="sub-branch">
                            <div class="sub-branch-title">‚ûï Nh√°nh A.3: Th√™m ph∆∞∆°ng th·ª©c m·ªõi</div>
                            <div class="flex flex-col items-center space-y-3">
                                <div class="node node-sub">
                                    <span class="step-number">1</span>
                                    Chuy·ªÉn sang lu·ªìng thi·∫øt l·∫≠p ph∆∞∆°ng th·ª©c m·ªõi
                                </div>
                                <div class="arrow">‚Üì</div>
                                <div class="node node-sub">
                                    <span class="step-number">2</span>
                                    Ho√†n t·∫•t thi·∫øt l·∫≠p<br/>
                                    <small class="text-gray-600">(X√°c th·ª±c ph∆∞∆°ng th·ª©c m·ªõi)</small>
                                </div>
                                <div class="arrow">‚Üì</div>
                                <div class="node node-success node-sub">
                                    ‚úÖ Thi·∫øt l·∫≠p th√†nh c√¥ng<br/>
                                    üéâ ƒêƒÉng nh·∫≠p v√†o ·ª®NG D·ª§NG
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 2FA Disabled Branch -->
        <div class="flow-section">
            <div class="branch branch-2fa-off">
                <div class="branch-title title-off">
                    üü† LU·ªíNG B: T√ÄI KHO·∫¢N CH∆ØA B·∫¨T 2FA
                </div>
                
                <div class="flex flex-col items-center">
                    <div class="node node-process">
                        üí¨ Hi·ªÉn th·ªã Pop-up y√™u c·∫ßu thi·∫øt l·∫≠p 2FA<br/>
                        <small class="text-gray-600">Th√¥ng b√°o v·ªÅ t·∫ßm quan tr·ªçng c·ªßa b·∫£o m·∫≠t</small>
                    </div>
                    
                    <div class="arrow">‚Üì</div>
                    
                    <div class="node node-decision">
                        <span class="gate-number">B1</span>
                        ü§î C·ªîNG B1: Ng∆∞·ªùi d√πng l·ª±a ch·ªçn nh∆∞ th·∫ø n√†o?
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 w-full mt-6">
                        <!-- Sub-branch B1.1 -->
                        <div class="sub-branch">
                            <div class="sub-branch-title">‚è≠Ô∏è Nh√°nh B.1.1: B·ªè qua thi·∫øt l·∫≠p</div>
                            <div class="flex flex-col items-center space-y-3">
                                <div class="node node-decision node-sub">
                                    üîç Ki·ªÉm tra s·ªë l·∫ßn b·ªè qua c√≤n l·∫°i?<br/>
                                    <small class="text-gray-600">(H·ªá th·ªëng gi·ªõi h·∫°n s·ªë l·∫ßn)</small>
                                </div>
                                <div class="grid grid-cols-2 gap-3 w-full">
                                    <div class="text-center">
                                        <div class="text-xs text-red-600 font-semibold mb-2">‚ùå H·∫æT l∆∞·ª£t b·ªè qua</div>
                                        <div class="node node-error node-sub">
                                            üö´ B·∫Øt bu·ªôc ph·∫£i thi·∫øt l·∫≠p 2FA<br/>
                                            <small>Kh√¥ng th·ªÉ ti·∫øp t·ª•c</small>
                                        </div>
                                    </div>
                                    <div class="text-center">
                                        <div class="text-xs text-green-600 font-semibold mb-2">‚úÖ C√íN l∆∞·ª£t b·ªè qua</div>
                                        <div class="node node-success node-sub">
                                            ‚ö†Ô∏è Gi·∫£m 1 l∆∞·ª£t b·ªè qua<br/>
                                            üéâ V√†o ·ª®NG D·ª§NG
                                        </div>
                                        <div class="arrow text-xs">‚Üì</div>
                                        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-3 mt-2">
                                            <div class="text-xs font-semibold text-yellow-800 mb-2">‚ö†Ô∏è C·∫¢NH B√ÅO TR√äN GIAO DI·ªÜN:</div>
                                            <div class="space-y-2">
                                                <div class="node node-sub text-xs" style="background: #fefce8; border-color: #facc15;">
                                                    <span class="step-number" style="width: 16px; height: 16px; font-size: 10px;">1</span>
                                                    Hi·ªÉn th·ªã c·∫£nh b√°o tr√™n Avatar
                                                </div>
                                                <div class="arrow text-xs">‚Üì</div>
                                                <div class="node node-sub text-xs" style="background: #fefce8; border-color: #facc15;">
                                                    <span class="step-number" style="width: 16px; height: 16px; font-size: 10px;">2</span>
                                                    Ng∆∞·ªùi d√πng click menu Avatar
                                                </div>
                                                <div class="arrow text-xs">‚Üì</div>
                                                <div class="node node-sub text-xs" style="background: #fefce8; border-color: #facc15;">
                                                    <span class="step-number" style="width: 16px; height: 16px; font-size: 10px;">3</span>
                                                    C·∫£nh b√°o t·∫°i "Thi·∫øt l·∫≠p b·∫£o m·∫≠t"
                                                </div>
                                                <div class="arrow text-xs">‚Üì</div>
                                                <div class="node node-process text-xs" style="background: #dbeafe; border-color: #3b82f6;">
                                                    üéØ Click ‚Üí Chuy·ªÉn ƒë·∫øn trang c√†i ƒë·∫∑t 2FA
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Sub-branch B1.2 -->
                        <div class="sub-branch">
                            <div class="sub-branch-title">‚öôÔ∏è Nh√°nh B.1.2: Ch·ªçn thi·∫øt l·∫≠p 2FA ngay</div>
                            <div class="flex flex-col items-center space-y-3">
                                <div class="node node-decision node-sub">
                                    <span class="gate-number">B2</span>
                                    üîç C·ªîNG B2: Ch·ªçn ph∆∞∆°ng th·ª©c 2FA n√†o?
                                </div>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-3 w-full">
                                    <!-- UPDATED Email/Phone -->
                                    <div class="bg-blue-50 p-3 rounded-lg flex flex-col">
                                        <div class="text-xs font-semibold text-center text-blue-700 mb-2">üìß Email / üì± S·ªë ƒëi·ªán tho·∫°i</div>
                                        <div class="flex flex-col items-center space-y-2">
                                            <div class="node node-sub text-xs">
                                                üîç Ki·ªÉm tra th√¥ng tin c√≥ s·∫µn?
                                            </div>
                                            <div class="grid grid-cols-2 gap-2 w-full">
                                                <!-- CH∆ØA C√ì TH√îNG TIN -->
                                                <div class="text-center">
                                                    <div style="font-size: 10px;" class="text-red-600 font-semibold mb-1">CH∆ØA c√≥</div>
                                                    <div class="node node-sub node-sub-small">
                                                        ‚ûï Y√™u c·∫ßu b·ªï sung
                                                    </div>
                                                     <div class="arrow text-xs" style="margin: 4px 0;">‚Üì</div>
                                                     <div class="node node-sub node-sub-small">
                                                        üì® G·ª≠i OTP x√°c th·ª±c
                                                    </div>
                                                    <div class="arrow text-xs" style="margin: 4px 0;">‚Üì</div>
                                                    <div class="node node-success node-sub-small">
                                                        ‚úÖ B·∫≠t 2FA & V√†o App
                                                    </div>
                                                </div>
                                                <!-- ƒê√É C√ì TH√îNG TIN -->
                                                <div class="text-center">
                                                    <div style="font-size: 10px;" class="text-green-600 font-semibold mb-1">ƒê√É c√≥</div>
                                                    <div class="node node-sub node-sub-small">
                                                        üì® G·ª≠i OTP & Hi·ªÉn th·ªã m√†n h√¨nh nh·∫≠p
                                                    </div>
													<div class="arrow text-xs" style="margin: 4px 0;">‚Üì</div>
													<div class="node node-decision node-sub-small w-full">
                                                        B2.1: Ng∆∞·ªùi d√πng l√†m g√¨ ti·∫øp theo?
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- LU·ªíNG X·ª¨ L√ù KHI ƒê√É C√ì TH√îNG TIN -->
                                            <div class="w-full mt-2 pt-2 border-t border-dashed border-blue-300">
                                                <div class="node node-decision node-sub-small w-full">
                                                    <b>ü§î B2.1: Ng∆∞·ªùi d√πng l√†m g√¨ ti·∫øp theo?</b>
                                                </div>
                                                <div class="arrow text-xs" style="margin: 4px 0;">‚Üì</div>
                                                <div class="w-full space-y-3">
                                                    <!-- Nh√°nh: Nh·∫≠p OTP -->
                                                    <div class="bg-white p-2 rounded-md border border-gray-200">
                                                        <div class="font-bold text-blue-800 text-center" style="font-size: 10px;">Nh√°nh 1: Nh·∫≠p OTP</div>
                                                        <div class="arrow text-xs" style="margin: 4px 0;">‚Üì</div>
                                                        <div class="node node-decision node-sub-small">X√°c th·ª±c OTP?</div>
                                                        <div class="grid grid-cols-2 gap-1 w-full mt-1">
                                                            <div class="text-center">
                                                                <div style="font-size: 10px;" class="text-red-600 font-semibold">SAI</div>
                                                                <div class="node node-error node-sub-small">‚ö†Ô∏è B√°o l·ªói</div>
                                                            </div>
                                                            <div class="text-center">
                                                                <div style="font-size: 10px;" class="text-green-600 font-semibold">ƒê√öNG</div>
                                                                <div class="node node-success node-sub-small">‚úÖ V√†o App</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- Nh√°nh: ƒê·ªïi th√¥ng tin -->
                                                    <div class="bg-white p-2 rounded-md border border-gray-200">
                                                        <div class="font-bold text-yellow-800 text-center" style="font-size: 10px;">Nh√°nh 2: ƒê·ªïi th√¥ng tin</div>
                                                        <div class="arrow text-xs" style="margin: 4px 0;">‚Üì</div>
                                                        <div class="node node-process node-sub-small">Hi·ªÉn th·ªã form ƒë·ªïi th√¥ng tin</div>
                                                        <div class="arrow text-xs" style="margin: 4px 0;">‚Üì</div>
                                                        <div class="node node-decision node-sub-small">H√†nh ƒë·ªông?</div>
                                                        <div class="grid grid-cols-2 gap-1 w-full mt-1">
                                                            <div class="text-center">
                                                                <div style="font-size: 10px;" class="text-gray-600 font-semibold">Cancel</div>
                                                                <div class="node node-sub-small"> H·ªßy</div>
                                                            </div>
                                                            <div class="text-center">
                                                                <div style="font-size: 10px;" class="text-blue-600 font-semibold">OK</div>
                                                                <div class="node node-process node-sub-small">G·ª≠i OTP m·ªõi</div>
                                                                <div class="arrow text-xs" style="margin: 4px 0;">‚Üì</div>
                                                                <div class="node node-success node-sub-small">‚úÖ C·∫≠p nh·∫≠t & V√†o App</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Google Authenticator -->
                                    <div class="bg-green-50 p-3 rounded-lg">
                                        <div class="text-xs font-semibold text-center text-green-700 mb-2">üîê Google Authenticator</div>
                                        <div class="flex flex-col items-center space-y-2">
                                            <div class="node node-sub text-xs">
                                                <span class="step-number" style="width: 16px; height: 16px; font-size: 10px;">1</span>
                                                Hi·ªÉn th·ªã QR Code
                                            </div>
                                            <div class="arrow text-xs">‚Üì</div>
                                            <div class="node node-sub text-xs">
                                                <span class="step-number" style="width: 16px; height: 16px; font-size: 10px;">2</span>
                                                X√°c th·ª±c m√£ TOTP
                                            </div>
                                            <div class="arrow text-xs">‚Üì</div>
                                            <div class="node node-sub text-xs">
                                                <span class="step-number" style="width: 16px; height: 16px; font-size: 10px;">3</span>
                                                Ki·ªÉm tra ng·∫ßm Email/SƒêT l√†m backup
                                            </div>
                                            <div class="arrow text-xs">‚Üì</div>
                                            <div class="node node-sub text-xs">
                                                <span class="step-number" style="width: 16px; height: 16px; font-size: 10px;">4</span>
                                                K√≠ch ho·∫°t ph∆∞∆°ng th·ª©c d·ª± ph√≤ng
                                            </div>
                                            <div class="arrow text-xs">‚Üì</div>
                                            <div class="node node-success node-sub text-xs">
                                                ‚úÖ B·∫≠t 2FA th√†nh c√¥ng<br/>
                                                üéâ V√†o ·ª®NG D·ª§NG
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Technical Integration -->
        <div class="flow-section">
            <div class="section-title">üîß S∆† ƒê·ªí T∆Ø∆†NG T√ÅC K·ª∏ THU·∫¨T</div>
            
            <div class="tab-container">
                <button class="tab-button active" onclick="showTab('sso')">
                    üîó T√≠ch h·ª£p theo SSO (Single Sign-On)
                </button>
                <button class="tab-button" onclick="showTab('api')">
                    üåê T√≠ch h·ª£p theo API (REST API)
                </button>
            </div>

            <!-- SSO Integration -->
            <div id="sso-content" class="tab-content">
                <div class="note-box mb-6">
                    <div class="note-title">üí° M√¥ h√¨nh SSO:</div>
                    <p>·ª®NG D·ª§NG ·ªßy th√°c ho√†n to√†n vi·ªác x√°c th·ª±c cho MISA ID, ch·ªâ nh·∫≠n k·∫øt qu·∫£ cu·ªëi c√πng.</p>
                </div>
                
                <div class="swimlane-container">
                    <div class="swimlane">
                        <div class="swimlane-title">üë§ NG∆Ø·ªúI D√ôNG</div>
                        <div class="space-y-4">
                            <div class="node node-start node-sub">
                                <span class="step-number">1</span>
                                B·∫Øt ƒë·∫ßu ƒëƒÉng nh·∫≠p v√†o ·ª®NG D·ª§NG
                            </div>
                            <div style="height: 200px; display: flex; align-items: center; justify-content: center;">
                                <div class="text-gray-400">‚è≥ Ch·ªù x·ª≠ l√Ω...</div>
                            </div>
                            <div class="node node-success node-sub">
                                <span class="step-number">6</span>
                                ƒêƒÉng nh·∫≠p th√†nh c√¥ng v√†o ·ª®NG D·ª§NG<br/>
                                <small class="text-green-600">C√≥ session h·ª£p l·ªá</small>
                            </div>
                        </div>
                    </div>
                    
                    <div class="swimlane">
                        <div class="swimlane-title">üè¢ ·ª®NG D·ª§NG</div>
                        <div class="space-y-4">
                            <div class="node node-process node-sub">
                                <span class="step-number">2</span>
                                Chuy·ªÉn h∆∞·ªõng ng∆∞·ªùi d√πng ƒë·∫øn MISA ID<br/>
                                <small class="text-gray-600">Redirect v·ªõi return_url</small>
                            </div>
                            <div style="height: 80px; display: flex; align-items: center; justify-content: center;">
                                <div class="text-gray-400">‚è≥ Ch·ªù callback...</div>
                            </div>
                            <div class="node node-process node-sub">
                                <span class="step-number">5</span>
                                Nh·∫≠n URL callback t·ª´ MISA ID<br/>
                                <small class="text-blue-600">Ki·ªÉm tra token, user_info & t·∫°o session</small>
                            </div>
                        </div>
                    </div>
                    
                    <div class="swimlane">
                        <div class="swimlane-title">üîê MISA ID UI</div>
                        <div class="space-y-4">
                            <div class="node node-decision node-sub">
                                <span class="step-number">3</span>
                                X·ª≠ l√Ω to√†n b·ªô logic 2FA<br/>
                                <small class="text-purple-600">Thi·∫øt l·∫≠p ho·∫∑c X√°c th·ª±c</small>
                            </div>
                            <div class="arrow">‚Üì</div>
                            <div class="node node-success node-sub">
                                <span class="step-number">4</span>
                                Tr·∫£ v·ªÅ URL x√°c th·ª±c<br/>
                                <small class="text-green-600">K√®m theo access token & user_info</small>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="note-box">
                    <div class="note-title">üîç Chi ti·∫øt b∆∞·ªõc 3 - X·ª≠ l√Ω 2FA t·∫°i MISA ID:</div>
                    <ul class="list-disc pl-5 space-y-1">
                        <li><strong>N·∫øu ƒë√£ b·∫≠t 2FA:</strong> Hi·ªÉn th·ªã form nh·∫≠p m√£, x√°c th·ª±c, tr·∫£ k·∫øt qu·∫£</li>
                        <li><strong>N·∫øu ch∆∞a b·∫≠t 2FA:</strong> Hi·ªÉn th·ªã popup thi·∫øt l·∫≠p, h∆∞·ªõng d·∫´n c√†i ƒë·∫∑t, x√°c th·ª±c thi·∫øt l·∫≠p</li>
                        <li><strong>T·∫•t c·∫£ giao di·ªán</strong> ƒë·ªÅu do MISA ID UI qu·∫£n l√Ω, ·ª®NG D·ª§NG kh√¥ng can thi·ªáp</li>
                    </ul>
                </div>
            </div>

            <!-- API Integration -->
            <div id="api-content" class="tab-content hidden">
                <div class="note-box mb-6">
                    <div class="note-title">üí° M√¥ h√¨nh API:</div>
                    <p>·ª®NG D·ª§NG t√≠ch h·ª£p tr·ª±c ti·∫øp v·ªõi MISA ID API v√† nh√∫ng UI components khi c·∫ßn thi·∫øt.</p>
                </div>
                
                <div class="swimlane-container mb-6">
                    <div class="swimlane">
                        <div class="swimlane-title">üë§ NG∆Ø·ªúI D√ôNG</div>
                        <div class="space-y-3">
                            <div class="node node-start node-sub">
                                <span class="step-number">1</span>
                                Nh·∫≠p th√¥ng tin ƒëƒÉng nh·∫≠p<br/>
                                <small class="text-gray-600">Username + Password</small>
                            </div>
                        </div>
                    </div>
                    
                    <div class="swimlane">
                        <div class="swimlane-title">üè¢ ·ª®NG D·ª§NG</div>
                        <div class="space-y-3">
                            <div class="node node-process node-sub">
                                <span class="step-number">2</span>
                                G·ªçi API ƒëƒÉng nh·∫≠p<br/>
                                <code class="text-xs bg-gray-100 px-2 py-1 rounded">POST /api/auth/login</code>
                            </div>
                            <div class="arrow text-sm">‚Üì</div>
                            <div class="node node-decision node-sub">
                                <span class="step-number">4</span>
                                Nh·∫≠n response & r·∫Ω nh√°nh theo tr·∫°ng th√°i 2FA
                            </div>
                        </div>
                    </div>
                    
                    <div class="swimlane">
                        <div class="swimlane-title">üîó MISA ID API</div>
                        <div class="space-y-3">
                            <div class="node node-process node-sub">
                                <span class="step-number">3</span>
                                X√°c th·ª±c & tr·∫£ v·ªÅ tr·∫°ng th√°i 2FA<br/>
                                <small class="text-blue-600">success/failed + user_info (include 2fa status)</small>
                            </div>
                        </div>
                    </div>
                    
                    <div class="swimlane">
                        <div class="swimlane-title">üé® MISA ID UI</div>
                        <div class="space-y-3">
                            <div class="node node-sub" style="background: #f3f4f6; border-color: #d1d5db;">
                                üí§ Standby<br/>
                                <small class="text-gray-500">Ch·ªù ƒë∆∞·ª£c g·ªçi khi c·∫ßn</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- API Response Branches -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Branch A: 2FA Enabled -->
                    <div class="border-t-4 border-green-500 bg-green-50 p-6 rounded-lg">
                        <div class="text-center font-bold text-green-700 mb-4 text-lg">
                            üü¢ NH√ÅNH A: T√ÄI KHO·∫¢N ƒê√É B·∫¨T 2FA
                        </div>                        
                        <div class="swimlane-container">
                            <div class="swimlane" style="border-top-color: #10b981;">
                                <div class="swimlane-title" style="color: #10b981;">üë§ NG∆Ø·ªúI D√ôNG</div>
                                <div class="space-y-3">
                                    <div class="node node-process node-sub">
                                        <span class="step-number">5a</span>
                                        Nh·∫≠p m√£ OTP/TOTP<br/>
                                        <small class="text-gray-600">T·ª´ ph∆∞∆°ng th·ª©c ƒë√£ ch·ªçn</small>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="swimlane" style="border-top-color: #10b981;">
                                <div class="swimlane-title" style="color: #10b981;">üè¢ ·ª®NG D·ª§NG</div>
                                <div class="space-y-2">
                                    <div class="node node-process node-sub">
                                        <span class="step-number">4a</span>
                                        Hi·ªÉn th·ªã form nh·∫≠p m√£ 2FA<br/>
                                        <small class="text-blue-600">UI do ·ª®NG D·ª§NG qu·∫£n l√Ω</small>
                                    </div>
                                    <div class="arrow text-sm">‚Üì</div>
                                    <div class="node node-process node-sub">
                                        <span class="step-number">6a</span>
                                        G·ªçi API x√°c th·ª±c m√£<br/>
                                        <code class="text-xs bg-gray-100 px-2 py-1 rounded">POST /api/auth/verify-2fa</code>
                                    </div>
                                    <div class="arrow text-sm">‚Üì</div>
                                    <div class="node node-success node-sub">
                                        <span class="step-number">7a</span>
                                        Nh·∫≠n token, user_info & ho√†n t·∫•t ƒëƒÉng nh·∫≠p
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Branch B: 2FA Disabled -->
                    <div class="border-t-4 border-orange-500 bg-orange-50 p-6 rounded-lg">
                        <div class="text-center font-bold text-orange-700 mb-4 text-lg">
                            üü† NH√ÅNH B: T√ÄI KHO·∫¢N CH∆ØA B·∫¨T 2FA
                        </div>                       
                        <div class="swimlane-container">
                            <div class="swimlane" style="border-top-color: #f59e0b;">
                                <div class="swimlane-title" style="color: #f59e0b;">üè¢ ·ª®NG D·ª§NG</div>
                                <div class="space-y-3">
                                    <div class="node node-process node-sub">
                                        <span class="step-number">4b</span>
                                        Hi·ªÉn th·ªã Pop-up, nh√∫ng MISA ID UI v√†o iframe b·∫±ng <code class="text-xs bg-gray-200 px-1 rounded">setup_url</code>
                                    </div>
                                    <div class="arrow text-sm">‚Üì</div>
                                    <div class="node node-process node-sub">
                                        <span class="step-number">5b</span>
                                        L·∫Øng nghe s·ª± ki·ªán <code class="text-xs bg-gray-200 px-1 rounded">PostMessage</code>
                                    </div>
                                    <div class="arrow text-sm">‚Üì</div>
                                    <!-- UPDATED SECTION -->
                                    <div class="node node-decision node-sub">
                                        <span class="step-number">7b</span>
                                        Nh·∫≠n ƒë∆∞·ª£c s·ª± ki·ªán g√¨?
                                    </div>
                                    <div class="grid grid-cols-2 gap-3 w-full mt-2">
                                        <div class="flex flex-col items-center">
                                            <div class="text-xs font-semibold text-green-600 mb-1">‚úÖ Th√†nh c√¥ng /<br/>‚ö†Ô∏è B·ªè qua</div>
                                            <div class="node node-success node-sub-small w-full">
                                                `2fa_setup_complete`<br/>
												`2fa_setup_cancelled`<br/>
                                                <small>ƒê√≥ng Pop-up & ƒêƒÉng nh·∫≠p</small>
                                            </div>
                                        </div>
                                        <div class="flex flex-col items-center">
                                            <div class="text-xs font-semibold text-red-600 mb-1">‚ùå Th·∫•t b·∫°i<br/>.</div>
                                            <div class="node node-error node-sub-small w-full">
                                                `2fa_login_failed`<br/>
                                                <small>ƒê√≥ng Pop-up, h·ªßy ƒëƒÉng nh·∫≠p</small>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- END UPDATED SECTION -->
                                </div>
                            </div>
                             <div class="swimlane" style="border-top-color: #f59e0b;">
                                <div class="swimlane-title" style="color: #f59e0b;">üé® MISA ID UI (trong iframe)</div>
                                <div class="space-y-3">
                                    <div class="node node-process node-sub">
                                        <span class="step-number">6b</span>
                                        X·ª≠ l√Ω logic thi·∫øt l·∫≠p 2FA v√† g·ª≠i <code class="text-xs bg-gray-200 px-1 rounded">PostMessage</code> khi xong
                                    </div>
                                </div>
                            </div>
                        </div>        
                    </div>
                </div>
                
                <!-- PostMessage Events -->
                <div class="note-box mt-6">
                    <div class="note-title">üì° PostMessage Events (Communication gi·ªØa ·ª®NG D·ª§NG v√† MISAID UI):</div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
                        <div class="bg-white p-4 rounded-lg border">
                            <h4 class="font-semibold text-green-600 mb-2">‚úÖ Thi·∫øt l·∫≠p th√†nh c√¥ng:</h4>
                            <p class="text-xs text-gray-600 mb-2">Ng∆∞·ªùi d√πng ho√†n t·∫•t c√†i ƒë·∫∑t 2FA. ·ª®ng d·ª•ng nh·∫≠n token v√† ƒëƒÉng nh·∫≠p.</p>
                            <pre class="text-xs bg-gray-100 p-2 rounded"><code>{
  "type": "2fa_setup_complete",
  "data": {
    "user_id": "123456",
	"user_info": "...",
    "access_token": "..."
  }
}</code></pre>
                        </div>
                        <div class="bg-white p-4 rounded-lg border">
                            <h4 class="font-semibold text-yellow-600 mb-2">‚è© B·ªè qua / H·ªßy thi·∫øt l·∫≠p:</h4>
                            <p class="text-xs text-gray-600 mb-2">Ng∆∞·ªùi d√πng ƒë√≥ng pop-up ho·∫∑c nh·∫•n n√∫t b·ªè qua. ·ª®ng d·ª•ng v·∫´n ti·∫øp t·ª•c cho ƒëƒÉng nh·∫≠p.</p>
                            <pre class="text-xs bg-gray-100 p-2 rounded"><code>{
  "type": "2fa_setup_cancelled",
  "data": {
    "user_id": "123456",
    "user_info": "...",
	...
  }
}</code></pre>
                        </div>
                        <div class="bg-white p-4 rounded-lg border">
                            <h4 class="font-semibold text-red-600 mb-2">üö´ ƒêƒÉng nh·∫≠p th·∫•t b·∫°i:</h4>
                             <p class="text-xs text-gray-600 mb-2">X·∫£y ra khi ng∆∞·ªùi d√πng b·∫Øt bu·ªôc ph·∫£i c√†i 2FA (h·∫øt l∆∞·ª£t b·ªè qua) nh∆∞ng l·∫°i ƒë√≥ng pop-up.</p>
                            <pre class="text-xs bg-gray-100 p-2 rounded"><code>{
  "type": "2fa_login_failed",
  "data": {
    "user_id": "123456",
    "user_info": "...",
	...
  }
}</code></pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Summary Section -->
        <div class="flow-section">
            <div class="section-title">üìä T√ìM T·∫ÆT C√ÅC LU·ªíNG</div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Main Flow Summary -->
                <div class="bg-blue-50 p-6 rounded-lg border-l-4 border-blue-500">
                    <h3 class="font-bold text-blue-800 mb-3">üö™ LU·ªíNG CH√çNH</h3>
                    <ul class="text-sm space-y-2">
                        <li>‚úÖ X√°c th·ª±c username/password</li>
                        <li>üîç Ki·ªÉm tra tr·∫°ng th√°i 2FA</li>
                        <li>üîÄ R·∫Ω nh√°nh theo k·∫øt qu·∫£</li>
                    </ul>
                </div>
                
                <!-- 2FA Enabled Summary -->
                <div class="bg-green-50 p-6 rounded-lg border-l-4 border-green-500">
                    <h3 class="font-bold text-green-800 mb-3">üü¢ 2FA ƒê√É B·∫¨T</h3>
                    <ul class="text-sm space-y-2">
                        <li>üì± Nh·∫≠p m√£ x√°c th·ª±c</li>
                        <li>üîÑ Th·ª≠ ph∆∞∆°ng th·ª©c kh√°c</li>
                        <li>‚ûï Th√™m ph∆∞∆°ng th·ª©c m·ªõi</li>
                        <li>‚úÖ ƒêƒÉng nh·∫≠p th√†nh c√¥ng</li>
                    </ul>
                </div>
                
                <!-- 2FA Disabled Summary -->
                <div class="bg-orange-50 p-6 rounded-lg border-l-4 border-orange-500">
                    <h3 class="font-bold text-orange-800 mb-3">üü† 2FA CH∆ØA B·∫¨T</h3>
                    <ul class="text-sm space-y-2">
                        <li>üí¨ Hi·ªÉn th·ªã popup y√™u c·∫ßu</li>
                        <li>‚è≠Ô∏è Cho ph√©p b·ªè qua (c√≥ gi·ªõi h·∫°n)</li>
                        <li>‚öôÔ∏è Thi·∫øt l·∫≠p ngay l·∫≠p t·ª©c</li>
                        <li>üìß Email/SMS ho·∫∑c üì± Authenticator</li>
                    </ul>
                </div>
            </div>
            
            <!-- Technical Summary -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
                <div class="bg-purple-50 p-6 rounded-lg border-l-4 border-purple-500">
                    <h3 class="font-bold text-purple-800 mb-3">üîó T√çCH H·ª¢P SSO</h3>
                    <ul class="text-sm space-y-2">
                        <li>üèÉ‚Äç‚ôÇÔ∏è ·ª®NG D·ª§NG chuy·ªÉn h∆∞·ªõng ƒë·∫øn MISA ID</li>
                        <li>üîê MISA ID x·ª≠ l√Ω to√†n b·ªô logic 2FA</li>
                        <li>‚Ü©Ô∏è Callback v·ªÅ ·ª®NG D·ª§NG v·ªõi k·∫øt qu·∫£</li>
                        <li>üéØ ƒê∆°n gi·∫£n cho developer ·ª®NG D·ª§NG</li>
                    </ul>
                </div>
                
                <div class="bg-indigo-50 p-6 rounded-lg border-l-4 border-indigo-500">
                    <h3 class="font-bold text-indigo-800 mb-3">üåê T√çCH H·ª¢P API</h3>
                    <ul class="text-sm space-y-2">
                        <li>üì° ·ª®NG D·ª§NG g·ªçi tr·ª±c ti·∫øp MISA ID API</li>
                        <li>üé® Nh√∫ng MISA ID UI khi c·∫ßn thi·∫øt</li>
                        <li>üì¨ S·ª≠ d·ª•ng PostMessage communication</li>
                        <li>üîß Linh ho·∫°t h∆°n cho customization</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        function showTab(tabName) {
            // Hide all tab contents
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => content.classList.add('hidden'));
            
            // Remove active class from all buttons
            const buttons = document.querySelectorAll('.tab-button');
            buttons.forEach(button => button.classList.remove('active'));
            
            // Show selected content and activate button
            document.getElementById(tabName + '-content').classList.remove('hidden');
            event.target.classList.add('active');
        }
        
        // Smooth scroll animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);
        
        // Apply animations to all nodes
        document.addEventListener('DOMContentLoaded', () => {
            const animatedElements = document.querySelectorAll('.node, .branch, .swimlane, .flow-step');
            
            animatedElements.forEach((element, index) => {
                element.style.opacity = '0';
                element.style.transform = 'translateY(20px)';
                element.style.transition = `all 0.25s ease ${index * 0.02}s`;
                observer.observe(element);
            });
        });
    </script>
</body>
</html>
